<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Socket Gateway</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <div id="buttonElement"></div>

    <script>
      ;(async () => {
        const windowOrigin = window.location.origin
        const buttonElement = document.getElementById('buttonElement')
        const response = await fetch(`${windowOrigin}/api/tenant/items`).then(res => res.json())
        const results = response.data ?? []

        results.forEach(item => {
          const virtualButton = document.createElement('button')
          virtualButton.textContent = `${item?.name} (${item?.code})`
          virtualButton.classList.add('button')
          virtualButton.onclick = () => {
            if ('navigator' in window) {
              window.navigator.clipboard.writeText(
                JSON.stringify(
                  {
                    tenantCode: item?.code,
                    sid: item?.secretKey,
                  },
                  null,
                  4,
                ),
              )
            }
          }
          buttonElement.append(virtualButton)
        })
      })()
    </script>
  </body>
</html>
